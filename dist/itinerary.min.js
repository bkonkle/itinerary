!function(t,e){"function"==typeof define&&define.amd?define(["require","exports","module","underscore"],e):"object"==typeof exports?module.exports=e(require("require"),require("exports"),require("module"),require("underscore")):t.Itinerary.Router=e(t.require,t.exports,t.module,t.underscore)}(this,function(t){return t=function e(n,r,i){function s(c,u){if(!r[c]){if(!n[c]){var f="function"==typeof t&&t;if(!u&&f)return f(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+c+"'")}var l=r[c]={exports:{}};n[c][0].call(l.exports,function(t){var e=n[c][1][t];return s(e?e:t)},l,l.exports,e,n,r,i)}return r[c].exports}for(var o="function"==typeof t&&t,c=0;c<i.length;c++)s(i[c]);return s}({F9UmcE:[function(t,e){"use strict";e.exports=t("./lib/router"),e.exports.VERSION="0.0.1"},{"./lib/router":4}],itinerary:[function(t,e){e.exports=t("F9UmcE")},{}],3:[function(t,e){"use strict";var n,r,i=t("underscore"),s=Array.prototype.slice,o={on:function(t,e,r){if(!n(this,"on",t,[e,r])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:r,ctx:r||this}),this},once:function(t,e,r){if(!n(this,"once",t,[e,r])||!e)return this;var s=this,o=i.once(function(){s.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,r)},off:function(t,e,r){var s,o,c,u,f,l,a,h;if(!this._events||!n(this,"off",t,[e,r]))return this;if(!t&&!e&&!r)return this._events=void 0,this;for(u=t?[t]:i.keys(this._events),f=0,l=u.length;l>f;f++)if(t=u[f],c=this._events[t]){if(this._events[t]=s=[],e||r)for(a=0,h=c.length;h>a;a++)o=c[a],(e&&e!==o.callback&&e!==o.callback._callback||r&&r!==o.context)&&s.push(o);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!n(this,"trigger",t,e))return this;var i=this._events[t],o=this._events.all;return i&&r(i,e),o&&r(o,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,n,this),(s||i.isEmpty(t._events))&&delete this._listeningTo[o];return this}},c=/\s+/;n=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var s=n.split(c),o=0,u=s.length;u>o;o++)t[e].apply(t,[s[o]].concat(r));return!1}return!0},r=function(t,e){var n,r=-1,i=t.length,s=e[0],o=e[1],c=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,o);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,s,o,c);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}};var u={listenTo:"on",listenToOnce:"once"};i.each(u,function(t,e){o[e]=function(e,n,r){var s=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=i.uniqueId("l"));return s[o]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),o.bind=o.on,o.unbind=o.off,e.exports=o},{}],4:[function(t){"use strict";t("underscore"),t("./events")},{"./events":3}],5:[function(){},{}]},{},["F9UmcE"])});